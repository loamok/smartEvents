/*! smartEvents 28-02-2021 */

const smartEventDefine={owner:null,event:null,handler:null};var smartEventManager={firstOrder:-999,lastOrder:999,sOrderKey:"sOrder",sOrderKeySep:"_",smartEvents:{},sortMe:function(e){var t=!0;do{t=!1;for(var r=0;r<e.length;r++)for(var a=e.length-1;a>0&&a!==r;a--){if(parseInt(e[r].split(smartEventManager.sOrderKeySep)[1])>parseInt(e[a].split(smartEventManager.sOrderKeySep)[1])){var n=e[r];e[r]=e[a],e[a]=n,t=!0}}}while(t);return e},ownerForPlugin:function(e,t){return void 0!==e&&null!==e?void 0!==e.owner&&null!==e.owner||(e.owner=t):void 0===smartEventManager.smartEvents[t.attr("id")]&&(smartEventManager.smartEvents[t.attr("id")]={}),e},deRegister:function(e){if(e.owner&&e.owner.attr("id")){var t=smartEventManager.smartEvents[e.owner.attr("id")];$(e.owner).off(e.event),delete t[e.event]}},recordSmartEvent:function(e,t,r,a){var n;void 0===t&&(t=0);var s=smartEventManager.sOrderKey+smartEventManager.sOrderKeySep+t;if(e.owner&&e.owner.attr("id")){if(smartEventManager.smartEvents[e.owner.attr("id")]||(smartEventManager.smartEvents[e.owner.attr("id")]={}),(n=smartEventManager.smartEvents[e.owner.attr("id")])[e.event]||(n[e.event]={toTrigger:[],defined:!1,last:null,first:null}),n[e.event].last=!0===r?s:n[e.event].last,n[e.event].first=!0===a?s:n[e.event].first,n[e.event][s]){var v=t<0?t-1:t+1;return void smartEventManager.recordSmartEvent(e,v,r,a)}n[e.event][s]=e,n[e.event].toTrigger.push(s),n[e.event].defined||($(e.owner).on(e.event,{obj:e.owner,eventName:e.event},smartEventManager.triggerMeOn),n[e.event].defined=!0),n[e.event].toTrigger=smartEventManager.sortMe(n[e.event].toTrigger)}},setMeFirst:function(e){smartEventManager.recordSmartEvent(e,smartEventManager.firstOrder,!1,!0)},setMeLast:function(e){smartEventManager.recordSmartEvent(e,smartEventManager.lastOrder,!0)},triggerMeOn:function(e){if(e.data.obj.attr("id")){var t=smartEventManager.smartEvents[e.data.obj.attr("id")];if(void 0===t)return;if(t[e.data.eventName]&&t[e.data.eventName].toTrigger){null!==t[e.data.eventName].first&&t[e.data.eventName][t[e.data.eventName].first].handler(e.data.obj,e);for(const r of t[e.data.eventName].toTrigger)r!==t[e.data.eventName].last&&r!==t[e.data.eventName].first&&t[e.data.eventName][r].handler(e.data.obj,e);null!==t[e.data.eventName].last&&t[e.data.eventName][t[e.data.eventName].last].handler(e.data.obj,e)}}}};!function(e){e.fn.smartEventDeRegister=function(t){var r=e(this),a={...t};a=smartEventManager.ownerForPlugin(a,r),smartEventManager.deRegister(a)},e.fn.smartEvent=function(t,r,a,n){var s=e(this),v={...t};v=smartEventManager.ownerForPlugin(v,s),void 0===a||!1===a?void 0===n||!1===n?smartEventManager.recordSmartEvent(v,r):smartEventManager.setMeFirst(v):smartEventManager.setMeLast(v)},e.fn.smartEventFirst=function(t){var r=e(this),a={...t};a=smartEventManager.ownerForPlugin(a,r),smartEventManager.setMeFirst(a)},e.fn.smartEventLast=function(t){var r=e(this),a={...t};a=smartEventManager.ownerForPlugin(a,r),smartEventManager.setMeLast(a)}}(jQuery);